@model List<mercharteria.Models.Producto>

@{
    ViewData["Title"] = "Home";
}

<div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" style="margin-bottom: 20px; width: 99vw; position: relative; left: 50%; transform: translateX(-50%);">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="https://firebasestorage.googleapis.com/v0/b/merchanteria-f305c.firebasestorage.app/o/slider1.svg?alt=media&token=0b2cde74-3f3c-4c6f-91b7-2bca7ef76015" class="d-block w-100" alt="Imagen 1">
        </div>
        <div class="carousel-item">
            <img src="https://firebasestorage.googleapis.com/v0/b/merchanteria-f305c.firebasestorage.app/o/slider2.svg?alt=media&token=2b849e7f-2a44-4dfa-afc6-435b07efe29e" class="d-block w-100" alt="Imagen 2">
        </div>
        <div class="carousel-item">
            <img src="https://firebasestorage.googleapis.com/v0/b/merchanteria-f305c.firebasestorage.app/o/slider3.svg?alt=media&token=0103fa66-830c-45e2-9c67-bd2f03f8e94c" class="d-block w-100" alt="Imagen 3">
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Siguiente</span>
    </button>
</div>

<section id="productos">
  <h2 style="text-align: center;">Nuestros productos exclusivos</h2>
  <div class="productos-container">
    @foreach (var producto in Model)
    {
      <a href="~/Productos/Details/@producto.Id" style="text-decoration: none; color: black;">
        <div class="producto">
          <img src="@producto.ImagenUrl" alt="@producto.Nombre" />
          <h3>@producto.Nombre</h3>
          <p>@producto.Descripcion</p>
          <span>@producto.Precio.ToString("C")</span>
        </div>
      </a>
    }
  </div>
</section>


<section class="product-slider-section">
  <h2>Todo para los fans de las pelis & series</h2>
  <div class="products-slider-container">
    <button class="slider-arrow prev-arrow">&#10094;</button>
    <div class="products-slider">
      @{
          var personajes = ViewBag.Personajes as List<mercharteria.Models.Personaje>;
          int total = personajes?.Count ?? 0;
      }
      @for (int i = 0; i < total; i += 4)
      {
          <div class="slider-row">
              @for (int j = i; j < i + 4 && j < total; j++)
              {
                  var personaje = personajes[j];
                  <div class="product-card">
                      <img src="@personaje.Imagen" alt="@personaje.Nombre" />
                      <h3>@personaje.Nombre</h3>
                      <a asp-controller="Productos" 
                        asp-action="PorPersonaje" 
                        asp-route-id="@personaje.Id" 
                        class="btn text-white" 
                        style="background-color: #050653; border-radius: 12px; padding: 8px 24px;">
                          ¡Descubre más ahora!
                      </a>
                      @* <button class="discover-btn">¡Descubre más ahora!</button> *@
                  </div>
              }
          </div>
      }
    </div>
    <button class="slider-arrow next-arrow">&#10095;</button>
  </div>
</section>



<section class="about-us" id="nosotros" style="padding: 2rem;">
    <div class="about-content" style="display: flex; justify-content: space-between; align-items: start; gap: 2rem;">
        <div style="flex: 1; max-width: 50%;">
            <h2>Sobre Nosotros</h2>
            <p>
                En <strong>Merch Arteria</strong>, nos apasiona la creatividad y la calidad. Nos especializamos en la 
                creación de <strong>merchandising exclusivo y personalizado</strong>, brindando productos únicos que reflejan 
                la esencia de cada marca o persona.
            </p>
            <p>
                Nos enfocamos en la <strong>excelencia y la innovación</strong>, utilizando materiales de alta calidad y 
                técnicas de impresión avanzadas para garantizar resultados excepcionales. Creemos que cada detalle cuenta, 
                por lo que trabajamos con dedicación para ofrecer productos que no solo sean visualmente atractivos, sino 
                también duraderos y funcionales.
            </p>
            <p>
                Nuestro equipo está comprometido en brindar una <strong>experiencia inigualable</strong>, con atención al 
                cliente de primer nivel y asesoramiento personalizado. ¡Déjanos ser parte de tu historia y llevar tus ideas 
                al siguiente nivel!
            </p>
        </div>
        <div style="flex: 1; max-width: 50%;">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3901.5854482619607!2d-76.94473582402013!3d-12.072018542373328!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9105c6e79034dc63%3A0x393610bdc506718b!2sFacultad%20de%20Ingenier%C3%ADa%20y%20Arquitectura%20-%20Universidad%20de%20San%20Mart%C3%ADn%20de%20Porres%20(USMP)!5e0!3m2!1sen!2spe!4v1745785494977!5m2!1sen!2spe"
            width="600"
            height="450"
            style="border:0; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" 
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
    </div>
</section>



<h2 style="text-align: center; margin-top: 30px;">Testimonios de nuestros clientes</h2>
<div class="testimonials" id="testimonios">
    @foreach (var testimonio in ViewBag.Testimonios)
    {
        <div class="testimonial-card">
            <p>
              @for (int i = 0; i < testimonio.Rating; i++)
              {
                  @:⭐
              }
            </p>
            <p>"@testimonio.Comentario"</p>
            <h4>- @testimonio.Nombre</h4>
        </div>
    }
</div>

<script>
  $(document).ready(function(){
    $('.carousel-container').slick({
      dots: false,
      infinite: true,
      speed: 500,
      slidesToShow: 1,
      slidesToScroll: 1,
      autoplay: true,
      autoplaySpeed: 3000,
      arrows: true,
      prevArrow: '<button class="prev">&#10094;</button>',
      nextArrow: '<button class="next">&#10095;</button>'
    });
  });
</script>

<script>
  document.getElementById("menu-btn").addEventListener("click", function () {
    document.getElementById("nav-links").classList.toggle("active");
  });
  

  document.querySelectorAll("#nav-links li a").forEach(link => {
    link.addEventListener("click", () => {
      document.getElementById("nav-links").classList.remove("active");
    });
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const slider = document.querySelector('.products-slider');
    const prevBtn = document.querySelector('.prev-arrow');
    const nextBtn = document.querySelector('.next-arrow');
    const sliderRows = document.querySelectorAll('.slider-row');
    let currentIndex = 0;
    const totalSlides = sliderRows.length;
    
    sliderRows.forEach(row => {
      row.style.minWidth = '100%';
      row.style.width = '100%';
    });
    
    function updateSlider() {
      const offset = -currentIndex * 100;
      slider.style.transform = `translateX(${offset}%)`; 
      slider.style.transition = 'transform 0.5s ease-in-out';
      
      prevBtn.style.visibility = currentIndex === 0 ? 'hidden' : 'visible';
      nextBtn.style.visibility = currentIndex === totalSlides - 1 ? 'hidden' : 'visible';
    }
    
    prevBtn.addEventListener('click', () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateSlider();
      }
    });
    nextBtn.addEventListener('click', () => {
      if (currentIndex < totalSlides - 1) {
        currentIndex++;
        updateSlider();
      }
    });
    updateSlider();
    
    slider.style.display = 'flex';
    slider.style.flexWrap = 'nowrap';
  });
</script>